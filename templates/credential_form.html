{% extends "layout.html" %}

{% block title %}{% if is_edit %}Edit{% else %}Create{% endif %} Credential -
Crabcakes Admin{% endblock %}

{% block content %}
<div class="breadcrumb">
    <h1><a href="/admin/credentials">Credentials</a> / {% if is_edit %}Edit {{
        access_key_id }}{% else %}Create New{% endif %}</h1>
</div>

<form id="credential-form">
    <div class="form-group">
        <p><label for="access-key-id">Access Key ID:</label>
            <input type="text" id="access-key-id" name="access-key-id"
                value="{{ access_key_id }}" {% if is_edit %}readonly{% endif %}
                required>
        </p>
        {% if is_edit %}
        <p class="help-text">Access Key ID cannot be changed after creation</p>
        {% else %}
        <p class="help-text">Use a meaningful identifier like a username</p>
        {% endif %}
    </div>

    <div class="form-group">
        <div>
            <label for="secret-access-key">Secret Access Key (40
                characters):</label>
            <input type="password" id="secret-access-key"
                name="secret-access-key"
                minlength="40" maxlength="40" pattern=".{40}" required>
            <button type="button" id="generate-key-btn"
                class="btn btn-secondary">
                Generate Random Key
            </button>
            <button type="button" id="toggle-visibility-btn"
                class="btn btn-secondary">
                Show/Hide
            </button>
        </div>
        <p class="help-text">Must be exactly 40 characters long</p>

    </div>

    <div class="form-actions">
        <button type="submit" class="btn btn-primary">Save Credential</button>
        <a
            href="{% if is_edit %}/admin/credentials/{{ access_key_id }}{% else %}/admin/credentials{% endif %}"
            class="btn btn-danger">Cancel</a>
    </div>
</form>

<div class="warning-box">
    <strong>Security Warning:</strong>
    <p>Secret access keys are sensitive credentials. Store them securely and
        never
        share them. Once saved, secret keys cannot be retrieved from the UI -
        they
        can only be updated.</p>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="/admin/static/js/csrf.js"></script>
<script src="/admin/static/js/credential-crud.js"></script>
{% endblock %}
